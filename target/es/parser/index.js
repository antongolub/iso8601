"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=parse;var _yy=_interopRequireDefault(require("./yy")),_yyyymmdd=_interopRequireDefault(require("./yyyymmdd")),_yyyyddd=_interopRequireDefault(require("./yyyyddd")),_yyyywwwd=_interopRequireDefault(require("./yyyywwwd")),_hhmmsstz=_interopRequireDefault(require("./hhmmsstz")),_datetime=_interopRequireDefault(require("./datetime"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var dateParsers=[_yy.default,_yyyymmdd.default,_yyyyddd.default,_yyyywwwd.default],timeParsers=[_hhmmsstz.default],dateTimeParsers=[_datetime.default],allParsers=[].concat(dateTimeParsers,dateParsers,timeParsers);function isValidDate(a){return a instanceof Date&&!isNaN(a.getTime())}function parse(a,b,c){var d,e,f,g=getParsers(b);a=(""+a).replace(",",".");for(var h=0;h<g.length;h++){d=g[h],e=getPatterns(d);for(var i=0;i<e.length;i++)if(f=e[i].exec(a),f){var j=isValidDate(c)?new Date(c):new Date;return d.builder(f,j)}}}function getParsers(a){switch((""+a).toLowerCase()){case"localtime":case"time":return timeParsers;case"date":return dateParsers;case"datetime":return dateTimeParsers;default:return allParsers;}}function getPatterns(a){return[].concat(a.pattern)}